// Custom Theming for Angular Material
// For more information: https://material.angular.io/guide/theming
@use '@angular/material' as mat;
@use 'ngx-toastr/toastr' as toastr;
@import 'assets/estilos/index';

html {
  @include mat.theme((color: (theme-type: light,
        primary: mat.$azure-palette,
        tertiary: mat.$blue-palette,
      ),
      typography: Roboto,
      density: 0,
    ));
}

/* Global Styles */
html,
body {
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  overflow: hidden;
}

app-root {
  height: 100%;
  width: 100%;
  display: flex;

}

body {
  margin: 0;
  font-family: Roboto, "Helvetica Neue", sans-serif;
}

/* Custom Scrollbar Styles - Minimalista */
/* Tema Claro */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(15, 23, 42, 0.15);
  border-radius: 10px;
  transition: background 0.3s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(15, 23, 42, 0.3);
}

/* Tema Oscuro */
html.dark-theme ::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.15);
}

html.dark-theme ::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.25);
}

/* Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: rgba(15, 23, 42, 0.15) transparent;
}

html.dark-theme * {
  scrollbar-color: rgba(255, 255, 255, 0.15) transparent;
}

/* Layout Container Styles */
.contenedor-principal {
  height: 100vh;
  width: 100%;
  display: flex;
  flex-direction: row;
  backdrop-filter: blur(500px);
  -webkit-backdrop-filter: blur(500px);
  transition: all 0.5s ease-in-out;

  :host-context(html.dark-theme) &,
  html.dark-theme & {
    background: $dark-bg-gradient;
  }

  :host-context(:not(.dark-theme)) &,
  html:not(.dark-theme) & {
    background: rgba($light-card-bg, 0.6);
  }
}

.contenedor-sidenav {
  width: 250px;
  height: 100%;
  transition: width background 0.5s ease-in-out;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  position: relative;

  :host-context(html.dark-theme) &,
  html.dark-theme & {
    background: $dark-bg-gradient;
    border-right: 1px solid $dark-border;
  }

  :host-context(:not(.dark-theme)) &,
  html:not(.dark-theme) & {
    background: rgba($light-card-bg, 0.6);
    border-right: 1px solid $light-border;
  }

  &.minimizado {
    width: 80px;

    .menu-text {
      display: none;
    }

    .menu-item {
      justify-content: center;
    }

    .toggle-label {
      display: none;
    }
  }
}


.contenedor-pagina {
  flex: 1;
  height: 100%;
  overflow-y: auto;
  overflow-x: hidden;
  padding: $spacing-xl;
  box-sizing: border-box;
  transition: background 0.5s ease-in-out;

  html.dark-theme & {
    background: $dark-bg-gradient;
    color: $dark-text-primary;
  }

  html:not(.dark-theme) & {
    background: $light-bg-gradient;
    color: $light-text-primary;
  }
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .contenedor-principal {
    flex-direction: column;
  }

  .contenedor-sidenav {
    width: 100%;
    height: auto;
    max-height: 60px;
    flex-direction: row;
    border-right: none;
    border-bottom: 1px solid #e0e0e0;

    &.minimizado {
      width: 100%;
      height: auto;
    }

    .sidenav-menu {
      flex-direction: row;
      overflow-x: auto;
    }

    .menu-item {
      flex: 0 0 auto;
      height: 56px;
      min-width: 56px;
      justify-content: center;

      .menu-text {
        display: none !important;
      }
    }
  }

  .contenedor-pagina {
    flex: 1;
    height: calc(100vh - 60px);
    overflow-y: auto;
  }
}

@media (max-width: 480px) {
  .contenedor-pagina {
    padding: $spacing-md;
  }
}

/* Material Input Styles - Theme Aware */
html.dark-theme {
  .mat-mdc-form-field {
    .mat-mdc-text-field-wrapper {
      background-color: $dark-input-bg !important;
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: $radius-sm;
    }

    .mat-mdc-form-field-focus-overlay {
      background-color: transparent !important;
    }

    .mdc-text-field--filled:not(.mdc-text-field--disabled) {
      background-color: $dark-input-bg !important;

      .mdc-line-ripple::before {
        border-bottom-color: $dark-input-border !important;
      }

      .mdc-line-ripple::after {
        border-bottom-color: $dark-accent !important;
      }
    }

    .mat-mdc-input-element {
      color: $dark-text-primary !important;
      caret-color: $dark-accent !important;
    }

    .mat-mdc-form-field-label,
    .mat-mdc-floating-label {
      color: $dark-text-secondary !important;
    }

    .mat-mdc-select-value,
    .mat-mdc-select-arrow {
      color: $dark-text-primary !important;
    }

    .mat-mdc-form-field-hint,
    .mat-mdc-form-field-error {
      color: $dark-text-secondary !important;
    }
  }

  .mat-mdc-select-panel {
    background-color: $dark-input-bg !important;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  .mat-mdc-option {
    color: $dark-text-primary !important;

    &:hover {
      background-color: $dark-table-row-hover !important;
    }

    &.mat-mdc-option-active {
      background-color: rgba($dark-accent, 0.15) !important;
    }
  }

  .mat-datepicker-content {
    background-color: $dark-input-bg !important;
    backdrop-filter: blur(12px);
    color: $dark-text-primary !important;

    .mat-calendar {
      color: $dark-text-primary !important;
    }

    .mat-calendar-body-selected {
      background-color: $dark-accent !important;
      color: white !important;
    }

    .mat-calendar-body-cell:hover {
      background-color: $dark-table-row-hover !important;
    }
  }
}

html:not(.dark-theme) {
  .mat-mdc-form-field {
    .mat-mdc-text-field-wrapper {
      background-color: $light-input-bg !important;
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: $radius-sm;
    }

    .mat-mdc-form-field-focus-overlay {
      background-color: transparent !important;
    }

    .mdc-text-field--filled:not(.mdc-text-field--disabled) {
      background-color: $light-input-bg !important;

      .mdc-line-ripple::before {
        border-bottom-color: $light-input-border !important;
      }

      .mdc-line-ripple::after {
        border-bottom-color: $light-accent !important;
      }
    }

    .mat-mdc-input-element {
      color: $light-text-primary !important;
      caret-color: $light-accent !important;
    }

    .mat-mdc-form-field-label,
    .mat-mdc-floating-label {
      color: $light-text-secondary !important;
    }

    .mat-mdc-select-value,
    .mat-mdc-select-arrow {
      color: $light-text-primary !important;
    }

    .mat-mdc-form-field-hint,
    .mat-mdc-form-field-error {
      color: $light-text-secondary !important;
    }
  }

  .mat-mdc-select-panel {
    background-color: $light-input-bg !important;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  .mat-mdc-option {
    color: $light-text-primary !important;

    &:hover {
      background-color: $light-table-row-hover !important;
    }

    &.mat-mdc-option-active {
      background-color: rgba($light-accent, 0.15) !important;
    }
  }

  .mat-datepicker-content {
    background-color: $light-input-bg !important;
    backdrop-filter: blur(12px);
    color: $light-text-primary !important;

    .mat-calendar {
      color: $light-text-primary !important;
    }

    .mat-calendar-body-selected {
      background-color: $light-accent !important;
      color: white !important;
    }

    .mat-calendar-body-cell:hover {
      background-color: $light-table-row-hover !important;
    }
  }
}

/* Material Table Styles - Theme Aware */
html.dark-theme {
  .mat-mdc-table {
    background-color: transparent !important;

    .mat-mdc-header-row {
      background-color: $dark-table-header-bg !important;
      backdrop-filter: blur(8px);
    }

    .mat-mdc-header-cell {
      color: $dark-text-secondary !important;
      font-weight: 700 !important;
      border-bottom: 1px solid $dark-border !important;
    }

    .mat-mdc-row {
      background-color: transparent !important;
      transition: background 0.5s ease-in-out;

      &:hover {
        background-color: $dark-table-row-hover !important;
      }
    }

    .mat-mdc-cell {
      color: $dark-text-primary !important;
      border-bottom: 1px solid $dark-border !important;
    }
  }
}

html:not(.dark-theme) {
  .mat-mdc-table {
    background-color: transparent !important;

    .mat-mdc-header-row {
      background-color: $light-table-header-bg !important;
      backdrop-filter: blur(8px);
    }

    .mat-mdc-header-cell {
      color: $light-text-secondary !important;
      font-weight: 700 !important;
      border-bottom: 1px solid $light-border !important;
    }

    .mat-mdc-row {
      background-color: transparent !important;
      transition: background 0.5s ease-in-out;

      &:hover {
        background-color: $light-table-row-hover !important;
      }
    }

    .mat-mdc-cell {
      color: $light-text-primary !important;
      border-bottom: 1px solid $light-border !important;
    }
  }

  /* Sidebar (mat-drawer) background */
  .mat-drawer,
  .mat-mdc-sidenav {
    background-color: rgba($light-card-bg, 0.6) !important;
    border-right: 1px solid $light-border !important;
    transition: background 0.5s ease-in-out;
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  /* Button Styles - Light Theme */
  button.mat-mdc-button,
  button.mat-mdc-raised-button:not(.mat-primary),
  button.mat-mdc-flat-button:not(.mat-primary),
  button.mat-mdc-stroked-button {
    color: $light-text-primary !important;
    transition: all 0.3s ease !important;

    .mdc-button__label {
      color: $light-text-primary !important;
    }

    mat-icon,
    .mat-icon {
      color: $light-text-primary !important;
    }

    &:hover:not(:disabled) {
      background-color: rgba($light-accent, 0.1) !important;
      color: $light-accent !important;

      .span.mdc-button__label {
        color: $light-accent !important;
      }
    }
  }

  button.mat-mdc-raised-button:not(.mat-primary),
  button.mat-mdc-unelevated-button:not(.mat-primary) {
    background-color: rgba($light-accent, 0.15) !important;
    color: $light-text-primary !important;

    .mdc-button__label {
      color: $light-text-primary !important;
    }

    mat-icon,
    .mat-icon {
      color: $light-text-primary !important;
    }

    &:hover:not(:disabled) {
      background-color: rgba($light-accent, 0.25) !important;
      box-shadow: 0 4px 12px rgba($light-accent, 0.2) !important;
    }
  }

  .mat-mdc-raised-button.mat-primary,
  .mat-mdc-unelevated-button.mat-primary {
    background-color: $light-accent !important;
    color: white !important;

    .span.mdc-button__label {
      color: white !important;
    }

    mat-icon,
    .mat-icon {
      color: white !important;
    }

    &:hover:not(:disabled) {
      background-color: darken($light-accent, 10%) !important;
      box-shadow: 0 4px 12px rgba($light-accent, 0.3) !important;
    }
  }

  .mat-mdc-icon-button {
    color: $light-text-primary !important;

    mat-icon,
    .mat-icon {
      color: $light-text-primary !important;
    }

    &:hover:not(:disabled) {
      background-color: rgba($light-accent, 0.1) !important;
    }
  }
}

html.dark-theme {

  /* Sidebar (mat-drawer) background */
  .mat-drawer,
  .mat-mdc-sidenav {
    background: rgba(15, 15, 15, 0.85) !important;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-right: 1px solid $dark-border !important;
    transition: background 0.5s ease-in-out;
    display: flex;
    flex-direction: column;
    height: 100%;
  }

  /* Button Styles - Dark Theme */
  button.mat-mdc-button,
  button.mat-mdc-raised-button:not(.mat-primary),
  button.mat-mdc-flat-button:not(.mat-primary),
  button.mat-mdc-stroked-button {
    color: $dark-text-primary !important;
    transition: all 0.3s ease !important;

    .mdc-button__label {
      color: $dark-text-primary !important;
    }

    mat-icon,
    .mat-icon {
      color: $dark-text-primary !important;
    }

    &:hover:not(:disabled) {
      background-color: rgba($dark-accent, 0.15) !important;
      color: $dark-accent !important;

      .mdc-button__label {
        color: $dark-accent !important;
      }
    }
  }

  button.mat-mdc-raised-button:not(.mat-primary),
  button.mat-mdc-unelevated-button:not(.mat-primary) {
    background-color: rgba($dark-accent, 0.2) !important;
    color: $dark-text-primary !important;

    .mdc-button__label {
      color: $dark-text-primary !important;
    }

    mat-icon,
    .mat-icon {
      color: $dark-text-primary !important;
    }

    &:hover:not(:disabled) {
      background-color: rgba($dark-accent, 0.3) !important;
      box-shadow: 0 4px 12px rgba($dark-accent, 0.2) !important;
    }
  }

  .mat-mdc-raised-button.mat-primary,
  .mat-mdc-unelevated-button.mat-primary {
    background-color: $dark-accent !important;
    color: white !important;

    .mdc-button__label {
      color: white !important;
    }

    mat-icon,
    .mat-icon {
      color: white !important;
    }

    &:hover:not(:disabled) {
      background-color: lighten($dark-accent, 10%) !important;
      box-shadow: 0 4px 12px rgba($dark-accent, 0.4) !important;
    }
  }

  .mat-mdc-icon-button {
    color: $dark-text-primary !important;

    mat-icon,
    .mat-icon {
      color: $dark-text-primary !important;
    }

    &:hover:not(:disabled) {
      background-color: rgba($dark-accent, 0.15) !important;
    }
  }

  /* Chips */
  .mat-mdc-chip {
    color: white !important;

    mat-icon {
      color: white !important;
    }

    .mdc-evolution-chip__text-label {
      color: white !important;
    }
  }
}